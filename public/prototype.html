<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CSUB Sales Intelligence Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@300;400;600;700&family=Source+Serif+4:wght@400;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --green-900: #0e2620;
  --green-800: #1a3c34;
  --green-700: #245a4e;
  --green-600: #2d7368;
  --green-500: #38917f;
  --green-400: #4db89e;
  --green-300: #7dd4bf;
  --green-200: #b5e8d9;
  --green-100: #e0f5ef;
  --green-50: #f0faf6;
  --gold: #c9a84c;
  --gold-light: #e8d48b;
  --red: #e74c3c;
  --orange: #f39c12;
  --blue: #3498db;
  --fresh: #27ae60;
  --active-blue: #2980b9;
  --urgent: #f1c40f;
  --critical: #e74c3c;
  --bg: #f4f6f5;
  --card: #ffffff;
  --text: #1a1a1a;
  --text-secondary: #5a6b65;
  --border: #e0e5e3;
  --shadow: 0 1px 3px rgba(0,0,0,.08), 0 4px 12px rgba(0,0,0,.04);
  --shadow-lg: 0 4px 24px rgba(0,0,0,.1);
  --radius: 12px;
  --radius-sm: 8px;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Source Sans 3',sans-serif; background:var(--bg); color:var(--text); font-size:14px; line-height:1.5; }
h1,h2,h3,h4 { font-family:'Source Serif 4',serif; }
.mono { font-family:'IBM Plex Mono',monospace; }

/* HEADER */
.header { background: linear-gradient(135deg, var(--green-900) 0%, var(--green-800) 100%); color:#fff; padding:0 32px; height:64px; display:flex; align-items:center; justify-content:space-between; position:sticky; top:0; z-index:100; box-shadow:0 2px 12px rgba(0,0,0,.2); }
.header-left { display:flex; align-items:center; gap:20px; }
.logo { font-family:'Source Serif 4',serif; font-size:28px; font-weight:700; letter-spacing:2px; color:var(--gold); }
.logo-sub { font-size:13px; color:var(--green-300); font-weight:300; letter-spacing:.5px; border-left:1px solid var(--green-600); padding-left:16px; }
.header-right { display:flex; align-items:center; gap:16px; }
.lang-toggle { display:flex; background:var(--green-700); border-radius:20px; overflow:hidden; }
.lang-btn { padding:5px 14px; font-size:12px; font-weight:600; cursor:pointer; border:none; background:transparent; color:var(--green-300); transition:.2s; }
.lang-btn.active { background:var(--green-500); color:#fff; }
.user-area { display:flex; align-items:center; gap:10px; padding:6px 14px; background:var(--green-700); border-radius:20px; font-size:13px; }
.user-avatar { width:28px; height:28px; border-radius:50%; background:var(--gold); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:12px; color:var(--green-900); }

/* SEARCH */
.search-container { padding:20px 32px 0; }
.search-bar { position:relative; max-width:800px; }
.search-bar input { width:100%; padding:14px 20px 14px 52px; border:2px solid var(--border); border-radius:50px; font-size:15px; font-family:'Source Sans 3',sans-serif; background:#fff; transition:.2s; box-shadow:var(--shadow); }
.search-bar input:focus { outline:none; border-color:var(--green-500); box-shadow:0 0 0 4px rgba(56,145,127,.15); }
.search-icon { position:absolute; left:18px; top:50%; transform:translateY(-50%); color:var(--green-600); font-size:18px; }
.ai-badge { position:absolute; right:14px; top:50%; transform:translateY(-50%); background:linear-gradient(135deg,var(--green-600),var(--green-400)); color:#fff; padding:4px 12px; border-radius:20px; font-size:11px; font-weight:600; letter-spacing:.5px; }

/* MAIN LAYOUT */
.main { padding:20px 32px 40px; }
.grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:20px; }
.grid-3 { display:grid; grid-template-columns:1fr 1fr 1fr; gap:20px; margin-bottom:20px; }
.full-width { margin-bottom:20px; }

/* CARDS */
.card { background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:24px; transition:box-shadow .2s; }
.card:hover { box-shadow:var(--shadow-lg); }
.card-title { font-size:13px; font-weight:600; color:var(--text-secondary); text-transform:uppercase; letter-spacing:1px; margin-bottom:16px; display:flex; align-items:center; justify-content:space-between; }
.card-title .icon { font-size:16px; }

/* KPI */
.kpi-row { display:grid; grid-template-columns:repeat(5,1fr); gap:16px; margin-bottom:20px; }
.kpi { background:var(--card); border-radius:var(--radius); padding:20px 24px; box-shadow:var(--shadow); position:relative; overflow:hidden; transition:.2s; cursor:default; }
.kpi:hover { transform:translateY(-2px); box-shadow:var(--shadow-lg); }
.kpi::after { content:''; position:absolute; top:0; left:0; right:0; height:3px; background:linear-gradient(90deg,var(--green-600),var(--green-400)); }
.kpi-label { font-size:12px; color:var(--text-secondary); text-transform:uppercase; letter-spacing:.8px; font-weight:600; margin-bottom:6px; }
.kpi-value { font-family:'IBM Plex Mono',monospace; font-size:32px; font-weight:500; color:var(--green-800); }
.kpi-change { font-size:12px; color:var(--fresh); margin-top:4px; }

/* PIPELINE */
.pipeline { display:flex; align-items:center; gap:0; margin:12px 0; }
.pipeline-step { flex:1; text-align:center; padding:16px 8px; background:var(--green-100); position:relative; cursor:default; transition:.2s; }
.pipeline-step:first-child { border-radius:var(--radius-sm) 0 0 var(--radius-sm); }
.pipeline-step:last-child { border-radius:0 var(--radius-sm) var(--radius-sm) 0; }
.pipeline-step:hover { background:var(--green-200); }
.pipeline-step .step-count { font-family:'IBM Plex Mono',monospace; font-size:28px; font-weight:500; color:var(--green-800); }
.pipeline-step .step-label { font-size:11px; color:var(--text-secondary); margin-top:4px; font-weight:600; text-transform:uppercase; letter-spacing:.3px; }
.pipeline-arrow { width:24px; height:24px; color:var(--green-400); flex-shrink:0; display:flex; align-items:center; justify-content:center; font-size:18px; }
.pipeline-step:nth-child(odd) { background:var(--green-50); }
.pipeline-bar { height:4px; background:var(--green-200); border-radius:2px; margin-top:8px; }
.pipeline-bar-fill { height:100%; border-radius:2px; background:linear-gradient(90deg,var(--green-600),var(--green-400)); transition:width .6s ease; }

/* FILTERS & SORTING */
.toolbar { display:flex; align-items:center; gap:12px; margin-bottom:16px; flex-wrap:wrap; }
.filter-btn { padding:7px 16px; border:1.5px solid var(--border); border-radius:20px; font-size:12px; font-weight:600; cursor:pointer; background:#fff; color:var(--text-secondary); transition:.2s; font-family:'Source Sans 3',sans-serif; }
.filter-btn:hover { border-color:var(--green-500); color:var(--green-700); }
.filter-btn.active { background:var(--green-800); color:#fff; border-color:var(--green-800); }
.sort-btn { padding:7px 16px; border:1.5px solid var(--gold); border-radius:20px; font-size:12px; font-weight:600; cursor:pointer; background:transparent; color:var(--gold); transition:.2s; font-family:'Source Sans 3',sans-serif; }
.sort-btn:hover, .sort-btn.active { background:var(--gold); color:var(--green-900); }
.toolbar-spacer { flex:1; }

/* TABLE */
.table-wrap { overflow-x:auto; }
table { width:100%; border-collapse:collapse; font-size:13px; }
th { text-align:left; padding:10px 12px; font-size:11px; text-transform:uppercase; letter-spacing:.8px; color:var(--text-secondary); border-bottom:2px solid var(--border); cursor:pointer; white-space:nowrap; font-weight:700; user-select:none; }
th:hover { color:var(--green-700); }
td { padding:10px 12px; border-bottom:1px solid var(--border); vertical-align:middle; }
tr { transition:background .15s; cursor:pointer; }
tbody tr:hover { background:var(--green-50); }
.relevance { padding:3px 10px; border-radius:12px; font-size:11px; font-weight:700; display:inline-block; }
.relevance-high { background:#dcf5e7; color:#1a7a3a; }
.relevance-med { background:#fef3cd; color:#856404; }
.relevance-low { background:#f0f0f0; color:#666; }
.urgency { width:10px; height:10px; border-radius:50%; display:inline-block; }
.urgency-fresh { background:var(--fresh); }
.urgency-active { background:var(--active-blue); }
.urgency-urgent { background:var(--urgent); }
.urgency-critical { background:var(--critical); }
.status { padding:3px 10px; border-radius:12px; font-size:11px; font-weight:600; display:inline-block; }
.status-ny { background:#e8f4fd; color:#2980b9; }
.status-behandling { background:#fef3cd; color:#856404; }
.status-tilbudt { background:#e8daef; color:#6c3483; }
.status-vunnet { background:#dcf5e7; color:#1a7a3a; }
.status-tapt { background:#fde8e8; color:#c0392b; }
.handler { font-size:11px; color:var(--text-secondary); }

/* CHARTS (dummy) */
.bar-chart { display:flex; align-items:flex-end; gap:8px; height:160px; padding-top:8px; }
.bar { border-radius:4px 4px 0 0; transition:height .6s ease; cursor:default; position:relative; min-width:28px; }
.bar:hover { opacity:.85; }
.bar-label { position:absolute; bottom:-22px; left:50%; transform:translateX(-50%); font-size:10px; color:var(--text-secondary); white-space:nowrap; }
.bar-value { position:absolute; top:-20px; left:50%; transform:translateX(-50%); font-size:11px; font-weight:600; color:var(--text); font-family:'IBM Plex Mono',monospace; }

.h-bar-chart { display:flex; flex-direction:column; gap:10px; }
.h-bar-row { display:flex; align-items:center; gap:12px; }
.h-bar-label { width:140px; font-size:12px; font-weight:600; text-align:right; white-space:nowrap; }
.h-bar-track { flex:1; height:24px; background:var(--green-50); border-radius:4px; overflow:hidden; }
.h-bar-fill { height:100%; border-radius:4px; background:linear-gradient(90deg,var(--green-700),var(--green-400)); transition:width .8s ease; display:flex; align-items:center; justify-content:flex-end; padding-right:8px; }
.h-bar-fill span { font-size:11px; font-weight:600; color:#fff; font-family:'IBM Plex Mono',monospace; }

/* MAP */
.world-map { position:relative; height:280px; background:var(--green-50); border-radius:var(--radius-sm); overflow:hidden; }
.world-map svg { width:100%; height:100%; }
.map-bubble { position:absolute; border-radius:50%; background:rgba(56,145,127,.2); border:2px solid var(--green-500); display:flex; align-items:center; justify-content:center; flex-direction:column; cursor:default; transition:.2s; }
.map-bubble:hover { transform:scale(1.1); background:rgba(56,145,127,.3); }
.map-bubble .pct { font-family:'IBM Plex Mono',monospace; font-size:16px; font-weight:500; color:var(--green-800); }
.map-bubble .region-name { font-size:9px; font-weight:700; color:var(--green-700); text-transform:uppercase; letter-spacing:.5px; }

/* WATER DEPTH */
.depth-chart { display:grid; grid-template-columns:repeat(12,1fr); gap:4px; height:140px; align-items:flex-end; }
.depth-bar { border-radius:3px 3px 0 0; transition:height .6s ease; position:relative; cursor:default; min-height:12px; }
.depth-bar:hover { opacity:.8; }
.depth-label { position:absolute; bottom:-30px; left:50%; transform:translateX(-50%) rotate(-45deg); font-size:9px; color:var(--text-secondary); white-space:nowrap; transform-origin:top left; }
.depth-value { position:absolute; top:-16px; left:50%; transform:translateX(-50%); font-size:10px; font-family:'IBM Plex Mono',monospace; color:var(--text); }

/* TIMELINE */
.timeline { display:flex; align-items:center; gap:0; overflow-x:auto; padding:20px 0 40px; position:relative; }
.timeline::before { content:''; position:absolute; top:50%; left:24px; right:24px; height:3px; background:var(--green-200); border-radius:2px; transform:translateY(-8px); }
.timeline-month { flex:1; min-width:90px; text-align:center; position:relative; z-index:1; }
.timeline-month .month-label { font-size:12px; font-weight:700; color:var(--text-secondary); margin-bottom:16px; }
.timeline-dot { width:16px; height:16px; border-radius:50%; background:var(--green-500); margin:0 auto; position:relative; z-index:1; border:3px solid #fff; box-shadow:0 0 0 2px var(--green-400); transition:.2s; }
.timeline-dot:hover { transform:scale(1.3); box-shadow:0 0 0 3px var(--green-500); }
.timeline-dot.empty { background:var(--green-200); box-shadow:none; border-color:var(--green-100); }
.timeline-count { font-size:11px; font-family:'IBM Plex Mono',monospace; margin-top:12px; color:var(--text-secondary); font-weight:500; }

/* NEWS */
.news-item { padding:14px 0; border-bottom:1px solid var(--border); display:flex; gap:12px; }
.news-item:last-child { border-bottom:none; }
.news-tag { padding:2px 8px; border-radius:10px; font-size:10px; font-weight:700; text-transform:uppercase; white-space:nowrap; flex-shrink:0; margin-top:2px; }
.news-tag-high { background:#dcf5e7; color:#1a7a3a; }
.news-tag-med { background:#fef3cd; color:#856404; }
.news-content { flex:1; }
.news-title { font-weight:600; font-size:13px; margin-bottom:2px; }
.news-meta { font-size:11px; color:var(--text-secondary); }

/* DROP ZONE */
.drop-zone { border:2px dashed var(--green-300); border-radius:var(--radius); padding:40px; text-align:center; color:var(--text-secondary); cursor:pointer; transition:.2s; background:var(--green-50); }
.drop-zone:hover, .drop-zone.dragover { border-color:var(--green-500); background:var(--green-100); }
.drop-icon { font-size:40px; margin-bottom:8px; }
.drop-text { font-size:14px; font-weight:600; }
.drop-sub { font-size:12px; margin-top:4px; }

/* FORECAST */
.forecast-chart { height:140px; position:relative; display:flex; align-items:flex-end; gap:6px; padding-bottom:24px; }
.forecast-bar { flex:1; border-radius:3px 3px 0 0; position:relative; transition:height .6s ease; }
.forecast-bar .f-label { position:absolute; bottom:-20px; left:50%; transform:translateX(-50%); font-size:10px; color:var(--text-secondary); }
.forecast-bar .f-value { position:absolute; top:-16px; left:50%; transform:translateX(-50%); font-size:10px; font-family:'IBM Plex Mono',monospace; }

/* AI DISCLAIMER */
.ai-disclaimer { display:flex; align-items:center; gap:8px; padding:10px 16px; background:var(--green-50); border-radius:var(--radius-sm); border-left:3px solid var(--gold); font-size:12px; color:var(--text-secondary); margin-top:12px; }
.ai-disclaimer .ai-icon { font-size:16px; }

/* DRAWER */
.drawer-overlay { position:fixed; inset:0; background:rgba(0,0,0,.4); z-index:200; opacity:0; pointer-events:none; transition:opacity .3s; }
.drawer-overlay.open { opacity:1; pointer-events:auto; }
.drawer { position:fixed; top:0; right:0; bottom:0; width:520px; max-width:90vw; background:#fff; z-index:201; transform:translateX(100%); transition:transform .35s cubic-bezier(.4,0,.2,1); box-shadow:-8px 0 32px rgba(0,0,0,.15); overflow-y:auto; }
.drawer.open { transform:translateX(0); }
.drawer-header { padding:20px 24px; background:linear-gradient(135deg,var(--green-900),var(--green-800)); color:#fff; display:flex; justify-content:space-between; align-items:flex-start; position:sticky; top:0; z-index:1; }
.drawer-close { background:none; border:none; color:#fff; font-size:24px; cursor:pointer; padding:4px 8px; border-radius:4px; }
.drawer-close:hover { background:rgba(255,255,255,.15); }
.drawer-body { padding:24px; }
.drawer-section { margin-bottom:20px; }
.drawer-section h4 { font-size:13px; text-transform:uppercase; letter-spacing:.8px; color:var(--text-secondary); margin-bottom:10px; font-family:'Source Sans 3',sans-serif; font-weight:700; }
.drawer-row { display:flex; justify-content:space-between; padding:6px 0; font-size:13px; border-bottom:1px solid var(--border); }
.drawer-row:last-child { border-bottom:none; }
.drawer-label { color:var(--text-secondary); }
.drawer-value { font-weight:600; }
.drawer-timeline { display:flex; flex-direction:column; gap:12px; padding-left:20px; border-left:2px solid var(--green-200); }
.drawer-timeline-item { position:relative; }
.drawer-timeline-item::before { content:''; position:absolute; left:-25px; top:4px; width:10px; height:10px; border-radius:50%; background:var(--green-500); border:2px solid #fff; }
.drawer-timeline-item .dt-date { font-size:11px; color:var(--text-secondary); }
.drawer-timeline-item .dt-text { font-size:13px; }

/* SECTION LABEL */
.section-label { font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:1.2px; color:var(--green-600); margin-bottom:12px; }

/* SCROLLBAR */
::-webkit-scrollbar { width:6px; height:6px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:var(--green-300); border-radius:3px; }
::-webkit-scrollbar-thumb:hover { background:var(--green-500); }

/* ANIMATIONS */
@keyframes fadeInUp { from { opacity:0; transform:translateY(12px); } to { opacity:1; transform:translateY(0); } }
.animate { animation: fadeInUp .5s ease forwards; }
.delay-1 { animation-delay:.05s; }
.delay-2 { animation-delay:.1s; }
.delay-3 { animation-delay:.15s; }
.delay-4 { animation-delay:.2s; }
.delay-5 { animation-delay:.25s; }
</style>
</head>
<body>

<!-- HEADER -->
<header class="header">
  <div class="header-left">
    <div class="logo">CSUB</div>
    <div class="logo-sub">Sales Intelligence Platform</div>
  </div>
  <div class="header-right">
    <div class="lang-toggle">
      <button class="lang-btn active" onclick="setLang('no',this)">NO</button>
      <button class="lang-btn" onclick="setLang('en',this)">EN</button>
    </div>
    <div class="user-area">
      <div class="user-avatar">HR</div>
      <span>Helge Rasmussen</span>
    </div>
  </div>
</header>

<!-- SEARCH -->
<div class="search-container">
  <div class="search-bar">
    <span class="search-icon">üîç</span>
    <input type="text" placeholder="S√∏k i kontrakter, prosjekter, nyheter..." id="searchInput" oninput="filterContracts()">
    <span class="ai-badge">‚ú® AI-s√∏k</span>
  </div>
</div>

<div class="main">

<!-- KPI CARDS -->
<div class="kpi-row">
  <div class="kpi animate delay-1">
    <div class="kpi-label">Totale kontrakter</div>
    <div class="kpi-value">247</div>
    <div class="kpi-change">‚Üë 12% vs forrige kvartal</div>
  </div>
  <div class="kpi animate delay-2">
    <div class="kpi-label">Leverand√∏rer</div>
    <div class="kpi-value">38</div>
    <div class="kpi-change">‚Üë 3 nye denne mnd</div>
  </div>
  <div class="kpi animate delay-3">
    <div class="kpi-label">Operat√∏rer</div>
    <div class="kpi-value">24</div>
    <div class="kpi-change">‚Üë 2 nye sist uke</div>
  </div>
  <div class="kpi animate delay-4">
    <div class="kpi-label">H√∏y CSUB-relevans</div>
    <div class="kpi-value">63</div>
    <div class="kpi-change">25.5% av total</div>
  </div>
  <div class="kpi animate delay-5">
    <div class="kpi-label">Regioner</div>
    <div class="kpi-value">5</div>
    <div class="kpi-change">Nordsj√∏en dominerer</div>
  </div>
</div>

<!-- PIPELINE -->
<div class="card full-width">
  <div class="card-title">Salgspipeline <span class="icon">üìä</span></div>
  <div class="pipeline">
    <div class="pipeline-step">
      <div class="step-count">142</div>
      <div class="step-label">FEED</div>
      <div class="pipeline-bar"><div class="pipeline-bar-fill" style="width:100%"></div></div>
    </div>
    <div class="pipeline-arrow">‚Üí</div>
    <div class="pipeline-step">
      <div class="step-count">67</div>
      <div class="step-label">Bud p√• bud</div>
      <div class="pipeline-bar"><div class="pipeline-bar-fill" style="width:47%"></div></div>
    </div>
    <div class="pipeline-arrow">‚Üí</div>
    <div class="pipeline-step">
      <div class="step-count">34</div>
      <div class="step-label">Tildeling</div>
      <div class="pipeline-bar"><div class="pipeline-bar-fill" style="width:24%"></div></div>
    </div>
    <div class="pipeline-arrow">‚Üí</div>
    <div class="pipeline-step">
      <div class="step-count">18</div>
      <div class="step-label">CSUB direkte kontakt</div>
      <div class="pipeline-bar"><div class="pipeline-bar-fill" style="width:13%"></div></div>
    </div>
    <div class="pipeline-arrow">‚Üí</div>
    <div class="pipeline-step">
      <div class="step-count">9</div>
      <div class="step-label">CSUB Contract Award</div>
      <div class="pipeline-bar"><div class="pipeline-bar-fill" style="width:6%"></div></div>
    </div>
  </div>
</div>

<!-- FILTERS & TABLE -->
<div class="card full-width">
  <div class="card-title">Kontraktoversikt <span class="icon">üìã</span></div>
  <div class="toolbar">
    <button class="filter-btn active" onclick="toggleFilter(this,'all')">Alle</button>
    <button class="filter-btn" onclick="toggleFilter(this,'epci')">EPCI</button>
    <button class="filter-btn" onclick="toggleFilter(this,'subsea')">Subsea</button>
    <div class="toolbar-spacer"></div>
    <button class="sort-btn active" id="sortNewest" onclick="toggleSort('newest')">Nyeste f√∏rst</button>
    <button class="sort-btn" id="sortUrgent" onclick="toggleSort('urgent')">Haster mest</button>
  </div>
  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th onclick="sortTable(0)">Dato ‚Üï</th>
          <th onclick="sortTable(1)">Leverand√∏r ‚Üï</th>
          <th onclick="sortTable(2)">Operat√∏r ‚Üï</th>
          <th onclick="sortTable(3)">Prosjektnavn ‚Üï</th>
          <th>CSUB-relevans</th>
          <th>Region</th>
          <th>Land</th>
          <th>Urgency</th>
          <th>Status</th>
          <th>Ansvarlig</th>
        </tr>
      </thead>
      <tbody id="contractTable"></tbody>
    </table>
  </div>
  <div class="ai-disclaimer">
    <span class="ai-icon">ü§ñ</span>
    AI-vurdering, verifiser selv ‚Äî relevansscorer er beregnet av maskinl√¶ring og kan inneholde feil.
  </div>
</div>

<!-- 2-COL: TOP CUSTOMERS + MAP -->
<div class="grid-2">
  <div class="card">
    <div class="card-title">Topp kunder etter aktivitet <span class="icon">üè¢</span></div>
    <div class="h-bar-chart">
      <div class="h-bar-row"><div class="h-bar-label">Equinor</div><div class="h-bar-track"><div class="h-bar-fill" style="width:92%"><span>42</span></div></div></div>
      <div class="h-bar-row"><div class="h-bar-label">Shell</div><div class="h-bar-track"><div class="h-bar-fill" style="width:74%"><span>34</span></div></div></div>
      <div class="h-bar-row"><div class="h-bar-label">Petrobras</div><div class="h-bar-track"><div class="h-bar-fill" style="width:61%"><span>28</span></div></div></div>
      <div class="h-bar-row"><div class="h-bar-label">TotalEnergies</div><div class="h-bar-track"><div class="h-bar-fill" style="width:48%"><span>22</span></div></div></div>
      <div class="h-bar-row"><div class="h-bar-label">BP</div><div class="h-bar-track"><div class="h-bar-fill" style="width:39%"><span>18</span></div></div></div>
      <div class="h-bar-row"><div class="h-bar-label">Aker BP</div><div class="h-bar-track"><div class="h-bar-fill" style="width:33%"><span>15</span></div></div></div>
      <div class="h-bar-row"><div class="h-bar-label">ConocoPhillips</div><div class="h-bar-track"><div class="h-bar-fill" style="width:26%"><span>12</span></div></div></div>
    </div>
  </div>
  <div class="card">
    <div class="card-title">Regioner ‚Äî verdenskart <span class="icon">üåç</span></div>
    <div class="world-map" style="background:linear-gradient(180deg,#e8f0ec 0%,#d5e5db 100%);">
      <svg viewBox="0 0 800 400" style="opacity:.15">
        <path d="M120,140 Q200,100 280,130 T400,120 Q480,110 540,140 T680,130 L700,200 Q650,250 580,240 T440,260 Q360,270 280,250 T120,240 Z" fill="var(--green-700)"/>
        <path d="M350,180 Q400,160 450,190 T550,200 Q580,220 560,250 T480,270 Q420,280 380,260 T350,220 Z" fill="var(--green-700)"/>
        <path d="M150,250 Q200,230 250,260 T350,280 Q380,310 340,340 T220,330 Q170,310 150,280 Z" fill="var(--green-700)"/>
      </svg>
      <div class="map-bubble" style="width:90px;height:90px;top:40px;left:28%"><div class="pct">38%</div><div class="region-name">Nordsj√∏en</div></div>
      <div class="map-bubble" style="width:70px;height:70px;top:140px;left:55%"><div class="pct">18%</div><div class="region-name">Vest-Afrika</div></div>
      <div class="map-bubble" style="width:75px;height:75px;top:200px;left:20%"><div class="pct">22%</div><div class="region-name">Brasil</div></div>
      <div class="map-bubble" style="width:55px;height:55px;top:80px;left:72%"><div class="pct">12%</div><div class="region-name">Asia-Pac</div></div>
      <div class="map-bubble" style="width:60px;height:60px;top:50px;left:12%"><div class="pct">10%</div><div class="region-name">GoM</div></div>
    </div>
  </div>
</div>

<!-- 2-COL: OPERATORS + WATER DEPTH -->
<div class="grid-2">
  <div class="card">
    <div class="card-title">Leverand√∏roversikt <span class="icon">üîß</span></div>
    <div class="bar-chart" id="operatorChart"></div>
  </div>
  <div class="card">
    <div class="card-title">Vanndybde-fordeling <span class="icon">üåä</span></div>
    <div class="depth-chart" id="depthChart" style="margin-bottom:36px;"></div>
  </div>
</div>

<!-- TIMELINE -->
<div class="card full-width">
  <div class="card-title">Tidslinje ‚Äî kontrakttildelinger <span class="icon">üìÖ</span></div>
  <div class="timeline" id="timeline"></div>
</div>

<!-- 2-COL: NEWS + DRAG/DROP -->
<div class="grid-2">
  <div class="card">
    <div class="card-title">Nyhetsstr√∏m ‚Äî AI-kuratert <span class="icon">üì∞</span></div>
    <div id="newsFeed"></div>
  </div>
  <div class="card" style="display:flex;flex-direction:column;">
    <div class="card-title">Dokumentopplasting <span class="icon">üìÑ</span></div>
    <div class="drop-zone" id="dropZone" style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;">
      <div class="drop-icon">üìé</div>
      <div class="drop-text">Slipp dokumenter eller skjermbilder her</div>
      <div class="drop-sub">AI analyserer og kobler til relevante kontrakter</div>
    </div>
  </div>
</div>

<!-- FORECAST -->
<div class="card full-width">
  <div class="card-title">Rystad-prognose ‚Äî Subsea-marked til 2034 <span class="icon">üìà</span></div>
  <div class="forecast-chart" id="forecastChart"></div>
  <div class="ai-disclaimer" style="margin-top:16px;">
    <span class="ai-icon">üìä</span>
    Kilde: Rystad Energy ‚Äî prognose oppdatert Q4 2025
  </div>
</div>

</div><!-- /main -->

<!-- DRAWER -->
<div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
<div class="drawer" id="drawer">
  <div class="drawer-header">
    <div>
      <h3 style="font-size:18px;margin-bottom:4px;" id="drawerTitle">Bacalhau Phase 2 ‚Äî SURF</h3>
      <div style="font-size:12px;opacity:.7;" id="drawerSubtitle">Subsea7 ‚Üí Equinor</div>
    </div>
    <button class="drawer-close" onclick="closeDrawer()">√ó</button>
  </div>
  <div class="drawer-body">
    <div class="drawer-section">
      <h4>Kontraktdetaljer</h4>
      <div class="drawer-row"><span class="drawer-label">Dato</span><span class="drawer-value" id="dDate">2025-11-18</span></div>
      <div class="drawer-row"><span class="drawer-label">Leverand√∏r</span><span class="drawer-value" id="dSupplier">Subsea7</span></div>
      <div class="drawer-row"><span class="drawer-label">Operat√∏r</span><span class="drawer-value" id="dOperator">Equinor</span></div>
      <div class="drawer-row"><span class="drawer-label">Region</span><span class="drawer-value" id="dRegion">Brasil</span></div>
      <div class="drawer-row"><span class="drawer-label">Land</span><span class="drawer-value" id="dCountry">Brasil</span></div>
      <div class="drawer-row"><span class="drawer-label">Type</span><span class="drawer-value" id="dType">EPCI</span></div>
      <div class="drawer-row"><span class="drawer-label">Vanndybde</span><span class="drawer-value" id="dDepth">2 100 m</span></div>
      <div class="drawer-row"><span class="drawer-label">Est. verdi</span><span class="drawer-value" id="dValue">$850M</span></div>
    </div>
    <div class="drawer-section">
      <h4>AI-relevansvurdering</h4>
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px;">
        <span class="relevance relevance-high">H√∏y</span>
        <span style="font-size:13px;">Score: <strong class="mono">0.94</strong></span>
      </div>
      <div style="font-size:12px;color:var(--text-secondary);line-height:1.6;">
        Prosjektet inkluderer subsea-installasjon med behov for spesialverkt√∏y og koblinger som matcher CSUB sitt produktsortiment. H√∏y sannsynlighet for direkte leveranse.
      </div>
      <div class="ai-disclaimer" style="margin-top:12px;">
        <span class="ai-icon">ü§ñ</span>
        AI-vurdering, verifiser selv
      </div>
    </div>
    <div class="drawer-section">
      <h4>Status</h4>
      <div id="drawerStatus" style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
        <button class="drawer-status-btn" onclick="setDrawerStatus(this,'Ny')" style="padding:8px 18px;border:2px solid var(--border);border-radius:8px;background:#fff;cursor:pointer;font-size:13px;font-weight:600;font-family:'Source Sans 3',sans-serif;transition:.2s;">Ny</button>
        <button class="drawer-status-btn active-status" onclick="setDrawerStatus(this,'Under behandling')" style="padding:8px 18px;border:2px solid var(--green-600);border-radius:8px;background:var(--green-100);cursor:pointer;font-size:13px;font-weight:600;font-family:'Source Sans 3',sans-serif;color:var(--green-800);transition:.2s;">üü¢ Under behandling</button>
        <button class="drawer-status-btn" onclick="setDrawerStatus(this,'Ferdigstilt')" style="padding:8px 18px;border:2px solid var(--border);border-radius:8px;background:#fff;cursor:pointer;font-size:13px;font-weight:600;font-family:'Source Sans 3',sans-serif;transition:.2s;">Ferdigstilt</button>
        <button class="drawer-status-btn" onclick="setDrawerStatus(this,'Forkastet')" style="padding:8px 18px;border:2px solid var(--border);border-radius:8px;background:#fff;cursor:pointer;font-size:13px;font-weight:600;font-family:'Source Sans 3',sans-serif;transition:.2s;">Forkastet</button>
      </div>
      <div id="drawerHandler" style="margin-top:12px;font-size:13px;color:var(--text-secondary);">
        Tatt av: <strong style="color:var(--text);">Helge Rasmussen</strong> ¬∑ 2. okt 2025
      </div>
    </div>
    <div class="drawer-section">
      <h4>Dokumenter</h4>
      <div style="font-size:13px;display:flex;flex-direction:column;gap:6px;">
        <a href="#" style="color:var(--green-600);text-decoration:none;">üìÑ Tilbudsdokument_Bacalhau_v3.pdf</a>
        <a href="#" style="color:var(--green-600);text-decoration:none;">üìä Teknisk_spesifikasjon.xlsx</a>
        <a href="#" style="color:var(--green-600);text-decoration:none;">üìß Korrespondanse_Subsea7.eml</a>
      </div>
    </div>
  </div>
</div>

<script>
// DATA
const contracts = [
  {date:'2026-01-15',supplier:'Subsea7',operator:'Equinor',project:'Irpa Subsea Tieback',relevance:'high',region:'Nordsj√∏en',country:'Norge',type:'subsea',age:28,status:'Under behandling',handler:'Helge R.'},
  {date:'2026-01-08',supplier:'TechnipFMC',operator:'Shell',project:'Jackdaw Phase 2 SURF',relevance:'high',region:'Nordsj√∏en',country:'UK',type:'epci',age:35,status:'Tilbudt',handler:'Helge R.'},
  {date:'2025-12-20',supplier:'Saipem',operator:'Petrobras',project:'B√∫zios 9 FPSO Risers',relevance:'med',region:'Brasil',country:'Brasil',type:'epci',age:54,status:'Ny',handler:'‚Äî'},
  {date:'2025-12-15',supplier:'Subsea7',operator:'TotalEnergies',project:'CLOV Phase 3 Subsea',relevance:'high',region:'Vest-Afrika',country:'Angola',type:'subsea',age:59,status:'Under behandling',handler:'Knut M.'},
  {date:'2025-12-01',supplier:'Aker Solutions',operator:'Equinor',project:'Troll Phase 3 Exp',relevance:'high',region:'Nordsj√∏en',country:'Norge',type:'subsea',age:73,status:'Vunnet',handler:'Helge R.'},
  {date:'2025-11-28',supplier:'TechnipFMC',operator:'BP',project:'Azeri Central East Umbilicals',relevance:'med',region:'Asia-Pac',country:'Aserbajdsjan',type:'subsea',age:76,status:'Tapt',handler:'Helge R.'},
  {date:'2025-11-18',supplier:'Subsea7',operator:'Equinor',project:'Bacalhau Phase 2 SURF',relevance:'high',region:'Brasil',country:'Brasil',type:'epci',age:86,status:'Tilbudt',handler:'Helge R.'},
  {date:'2025-11-05',supplier:'Prysmian',operator:'Aker BP',project:'Yggdrasil Power Cable',relevance:'low',region:'Nordsj√∏en',country:'Norge',type:'epci',age:99,status:'Ny',handler:'‚Äî'},
  {date:'2025-10-22',supplier:'McDermott',operator:'LLOG',project:'Salamanca EPCI',relevance:'med',region:'GoM',country:'USA',type:'epci',age:113,status:'Under behandling',handler:'Knut M.'},
  {date:'2025-10-10',supplier:'Saipem',operator:'ENI',project:'Coral South FLNG Phase 2',relevance:'high',region:'Vest-Afrika',country:'Mosambik',type:'epci',age:125,status:'Ny',handler:'‚Äî'},
  {date:'2025-09-28',supplier:'Subsea Integration Alliance',operator:'Woodside',project:'Scarborough Subsea',relevance:'med',region:'Asia-Pac',country:'Australia',type:'subsea',age:137,status:'Tilbudt',handler:'Helge R.'},
  {date:'2025-09-15',supplier:'TechnipFMC',operator:'Petrobras',project:'Mero 4 Flexible Risers',relevance:'high',region:'Brasil',country:'Brasil',type:'subsea',age:150,status:'Vunnet',handler:'Knut M.'},
  {date:'2025-08-30',supplier:'Oceaneering',operator:'Chevron',project:'Anchor SPS Tooling',relevance:'high',region:'GoM',country:'USA',type:'subsea',age:166,status:'Under behandling',handler:'Helge R.'},
  {date:'2025-08-12',supplier:'DOF Subsea',operator:'ConocoPhillips',project:'Eldfisk IMR Campaign',relevance:'low',region:'Nordsj√∏en',country:'Norge',type:'subsea',age:184,status:'Vunnet',handler:'Knut M.'},
  {date:'2025-07-20',supplier:'Subsea7',operator:'Shell',project:'Bonga North SURF',relevance:'high',region:'Vest-Afrika',country:'Nigeria',type:'epci',age:207,status:'Under behandling',handler:'Helge R.'},
  {date:'2026-02-05',supplier:'Aker Solutions',operator:'Equinor',project:'Wisting Subsea Production',relevance:'high',region:'Nordsj√∏en',country:'Norge',type:'subsea',age:7,status:'Ny',handler:'‚Äî'},
  {date:'2026-02-01',supplier:'TechnipFMC',operator:'TotalEnergies',project:'Kaminho Block 20 SPS',relevance:'med',region:'Vest-Afrika',country:'Angola',type:'subsea',age:11,status:'Under behandling',handler:'Knut M.'},
  {date:'2026-01-25',supplier:'Saipem',operator:'QatarEnergy',project:'North Field South Pipelines',relevance:'low',region:'Asia-Pac',country:'Qatar',type:'epci',age:18,status:'Ny',handler:'‚Äî'},
];

// URGENCY
function urgencyClass(age) {
  if(age<=14) return 'fresh'; if(age<=30) return 'active'; if(age<=60) return 'urgent'; return 'critical';
}
function urgencyLabel(age) {
  if(age<=14) return 'Fresh'; if(age<=30) return 'Active'; if(age<=60) return 'Urgent'; return 'Critical';
}

// RENDER TABLE
let currentFilter='all', currentSort='newest', searchQuery='';
function renderTable() {
  let data = [...contracts];
  if(currentFilter!=='all') data=data.filter(c=>c.type===currentFilter);
  if(searchQuery) { const q=searchQuery.toLowerCase(); data=data.filter(c=>Object.values(c).some(v=>String(v).toLowerCase().includes(q))); }
  if(currentSort==='newest') data.sort((a,b)=>b.date.localeCompare(a.date));
  else data.sort((a,b)=>b.age-a.age);
  const tb=document.getElementById('contractTable');
  tb.innerHTML=data.map((c,i)=>`<tr onclick="openDrawer(${contracts.indexOf(c)})">
    <td class="mono" style="font-size:12px">${c.date}</td>
    <td><strong>${c.supplier}</strong></td>
    <td>${c.operator}</td>
    <td>${c.project}</td>
    <td><span class="relevance relevance-${c.relevance}">${c.relevance==='high'?'H√∏y':c.relevance==='med'?'Medium':'Lav'}</span></td>
    <td>${c.region}</td>
    <td>${c.country}</td>
    <td><span class="urgency urgency-${urgencyClass(c.age)}" title="${urgencyLabel(c.age)} (${c.age}d)"></span> ${urgencyLabel(c.age)}</td>
    <td><span class="status status-${c.status==='Ny'?'ny':c.status==='Under behandling'?'behandling':c.status==='Tilbudt'?'tilbudt':c.status==='Vunnet'?'vunnet':'tapt'}">${c.status}</span></td>
    <td class="handler">${c.handler}</td>
  </tr>`).join('');
}
function toggleFilter(btn,type) {
  document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active'); currentFilter=type; renderTable();
}
function toggleSort(s) {
  currentSort=s;
  document.getElementById('sortNewest').classList.toggle('active',s==='newest');
  document.getElementById('sortUrgent').classList.toggle('active',s==='urgent');
  renderTable();
}
function filterContracts() { searchQuery=document.getElementById('searchInput').value; renderTable(); }

// DRAWER
function openDrawer(i) {
  const c=contracts[i];
  document.getElementById('drawerTitle').textContent=c.project;
  document.getElementById('drawerSubtitle').textContent=`${c.supplier} ‚Üí ${c.operator}`;
  document.getElementById('dDate').textContent=c.date;
  document.getElementById('dSupplier').textContent=c.supplier;
  document.getElementById('dOperator').textContent=c.operator;
  document.getElementById('dRegion').textContent=c.region;
  document.getElementById('dCountry').textContent=c.country;
  document.getElementById('dType').textContent=c.type.toUpperCase();
  document.getElementById('drawerOverlay').classList.add('open');
  document.getElementById('drawer').classList.add('open');
}
function closeDrawer() {
  document.getElementById('drawerOverlay').classList.remove('open');
  document.getElementById('drawer').classList.remove('open');
}

// LANG TOGGLE
function setLang(lang,btn) {
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

// OPERATOR CHART
(function(){
  const data=[{n:'Subsea7',v:48},{n:'TechnipFMC',v:41},{n:'Saipem',v:29},{n:'Aker Solutions',v:34},{n:'Prysmian',v:15},{n:'McDermott',v:12},{n:'DOF Subsea',v:18},{n:'Oceaneering',v:22}];
  const max=Math.max(...data.map(d=>d.v));
  document.getElementById('operatorChart').innerHTML=data.map(d=>`<div class="bar" style="height:${d.v/max*140}px;flex:1;background:linear-gradient(180deg,var(--green-500),var(--green-700))"><div class="bar-value">${d.v}</div><div class="bar-label">${d.n}</div></div>`).join('');
})();

// DEPTH CHART
(function(){
  const depths=['0-50m','50-100','100-200','200-500','500-800','800-1000','1-1.2k','1.2-1.5k','1.5-2k','2-2.5k','2.5-3k','3k+'];
  const vals=[8,14,22,35,28,19,24,18,12,9,5,3];
  const max=Math.max(...vals);
  const colors=['#b5e8d9','#7dd4bf','#4db89e','#38917f','#2d7368','#245a4e','#1a3c34','#163029','#122822','#0e2620','#0b1e1a','#081614'];
  document.getElementById('depthChart').innerHTML=depths.map((d,i)=>`<div class="depth-bar" style="height:${vals[i]/max*120}px;background:${colors[i]}"><div class="depth-value">${vals[i]}</div><div class="depth-label">${d}</div></div>`).join('');
})();

// TIMELINE
(function(){
  const months=['Jul','Aug','Sep','Okt','Nov','Des','Jan','Feb'];
  const counts=[3,5,4,7,6,8,4,2];
  document.getElementById('timeline').innerHTML=months.map((m,i)=>`<div class="timeline-month"><div class="month-label">${m}</div><div class="timeline-dot ${counts[i]===0?'empty':''}"></div><div class="timeline-count">${counts[i]} tildelinger</div></div>`).join('');
})();

// NEWS
(function(){
  const news=[
    {title:'Equinor tildeler Irpa-kontrakt til Subsea7 ‚Äî verdt $1.2 mrd',src:'Upstream',date:'12. feb 2026',tag:'high'},
    {title:'TechnipFMC melder rekordstor ordrebok for Q4 2025',src:'Reuters',date:'10. feb 2026',tag:'med'},
    {title:'Petrobras akselererer B√∫zios-utbygging med 3 nye FPSO-er',src:'OE Digital',date:'8. feb 2026',tag:'high'},
    {title:'Saipem vinner $800M EPCI-kontrakt i Vest-Afrika',src:'TradeWinds',date:'5. feb 2026',tag:'high'},
    {title:'Subsea-markedet ventes √• vokse 12% √•rlig til 2030 (Rystad)',src:'Rystad Energy',date:'1. feb 2026',tag:'med'},
    {title:'Aker Solutions og Subsea7 danner ny allianse for nordisk shelf',src:'TU',date:'28. jan 2026',tag:'med'},
  ];
  document.getElementById('newsFeed').innerHTML=news.map(n=>`<div class="news-item"><span class="news-tag news-tag-${n.tag}">${n.tag==='high'?'H√∏y':'Medium'}</span><div class="news-content"><div class="news-title">${n.title}</div><div class="news-meta">${n.src} ¬∑ ${n.date}</div></div></div>`).join('');
})();

// FORECAST
(function(){
  const years=['2024','2025','2026','2027','2028','2029','2030','2031','2032','2033','2034'];
  const vals=[42,48,55,61,68,72,78,82,88,91,97];
  const max=Math.max(...vals);
  document.getElementById('forecastChart').innerHTML=years.map((y,i)=>`<div class="forecast-bar" style="height:${vals[i]/max*120}px;background:${i<=1?'var(--green-700)':i<=2?'var(--green-600)':'linear-gradient(180deg,var(--green-400),var(--green-300))'}"><div class="f-value">${vals[i]}B</div><div class="f-label">${y}</div></div>`).join('');
})();

// DROP ZONE
const dz=document.getElementById('dropZone');
dz.addEventListener('dragover',e=>{e.preventDefault();dz.classList.add('dragover');});
dz.addEventListener('dragleave',()=>dz.classList.remove('dragover'));
dz.addEventListener('drop',e=>{e.preventDefault();dz.classList.remove('dragover');dz.innerHTML='<div class="drop-icon">‚úÖ</div><div class="drop-text">Dokument mottatt!</div><div class="drop-sub">AI-analyse starter...</div>';});

// DRAWER STATUS
function setDrawerStatus(btn,status) {
  document.querySelectorAll('.drawer-status-btn').forEach(b=>{
    b.style.border='2px solid var(--border)';b.style.background='#fff';b.style.color='var(--text)';
    b.textContent=b.textContent.replace('üü¢ ','');
  });
  btn.style.border='2px solid var(--green-600)';btn.style.background='var(--green-100)';btn.style.color='var(--green-800)';
  if(status==='Under behandling') btn.textContent='üü¢ Under behandling';
  const handlerEl=document.getElementById('drawerHandler');
  if(status==='Under behandling') handlerEl.style.display='block';
  else handlerEl.style.display='none';
}

// INIT
renderTable();
</script>
</body>
</html>
